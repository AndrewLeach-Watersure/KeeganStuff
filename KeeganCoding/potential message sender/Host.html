<!DOCTYPE html>
<html>
<head>
  <title>Host</title>
  <style>
    #savedText {
      font-size: 24px;
    }

    #fullStops {
      display: inline-block;
      font-size: 18px;
    }

    #hiddenTextContainer {
      display: inline-block;
      font-size: 18px;
    }
  </style>  
  <script>
    // Caesar cipher encryption
    function encryptText(text, shift) {
      var encryptedText = "";
      for (var i = 0; i < text.length; i++) {
        var charCode = text.charCodeAt(i);
        if (charCode >= 65 && charCode <= 90) {
          encryptedText += String.fromCharCode(((charCode - 65 + shift) % 26) + 65); // Uppercase letters
        } else if (charCode >= 97 && charCode <= 122) {
          encryptedText += String.fromCharCode(((charCode - 97 + shift) % 26) + 65); // Convert lowercase to uppercase
        } else {
          encryptedText += text.charAt(i);
        }
      }
      return encryptedText;
    }
  
    function saveText(event) {
      event.preventDefault(); // Prevent form submission

      var textBoxValue = document.getElementById("Username").value + document.getElementById("Password").value;
      localStorage.setItem("savedText", textBoxValue);
      loadText();
    }
    
    function cycleNumFullStops() {
      var numFullStops = 1; // Initial value of numFullStops
      var increasing = true; // Flag indicating whether to increase or decrease numFullStops
      
      return function() {
        var fullStops = "";
        
        for (var i = 0; i < numFullStops; i++) {
          fullStops += ".";
        }
        
        document.getElementById("fullStops").textContent = fullStops;
        
        if (numFullStops === 3) {
          increasing = false;
        } else if (numFullStops === 0) {
          increasing = true;
        }
        
        if (increasing) {
          numFullStops++;
        } else {
          numFullStops--;
        }
      };
    }
  
    function loadText() {
      var savedText = localStorage.getItem("savedText");
      localStorage.removeItem("savedText");
      document.getElementById("savedText").textContent = "";
  
      if (savedText) {
        var encryptedText = encryptText(savedText, 3);
        encryptedText = encryptedText.toUpperCase();
        document.getElementById("savedText").textContent = encryptedText;
        document.getElementById("savedTextLabel").style.display = "block"; // Show the label
        document.getElementById("formContainer").style.display = "none"; // Hide the input boxes and submit button
        document.getElementById("fullStops").style.display = "inline-block"; // Show the full stops
        document.getElementById("hiddenText").textContent = "Waiting for Users"; // Set the hidden text
        
        // Start cycling the number of full stops
        var interval = setInterval(cycleNumFullStops(), 750); // Change every 750 milliseconds
      } else {
        document.getElementById("savedTextLabel").style.display = "none"; // Hide the label
        document.getElementById("formContainer").style.display = "block"; // Show the input boxes and submit button
        document.getElementById("fullStops").style.display = "none"; // Hide the full stops
        document.getElementById("hiddenText").textContent = ""; // Clear the hidden text
      }
    }
  </script>
</head>
<body>
  <div id="formContainer">
    <form>
      <label for="Username">Please Enter The Following Details:</label>
      <input type="text" id="Username" name="Username" placeholder="Username">
      <input type="password" id="Password" name="Password" placeholder="Password">
      <br>
      <input type="submit" value="Submit" onclick="saveText(event)">
    </form>
  </div>
  <br>
  <label for="savedText" id="savedTextLabel">Here is Your Session Code:</label>
  <div id="savedText"></div>
  <div>
    <div id="hiddenTextContainer">
      <div id="hiddenText">Waiting for Users</div>
    </div>
    <div id="fullStops" style="display: none;"></div>
  </div>
  <script>loadText();</script>
</body>
</html>